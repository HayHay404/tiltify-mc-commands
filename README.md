# Tiltify MC Commands
A small web server to listen to donations from the Tiltify API through Webhooks and send commands to Minecraft
## Installation
> Before getting started, make sure you have pnpm & npm installed using `npm i -g pnpm`.
> Node v18 <= is a requirement as this project uses the fetch api.
- Clone the repo and CD into the directory
- run `pnpm i`
- Copy the `.example.env` file to `.env` and add your Tiltify credentials & a port for the webserver into it
- Copy the `src/commands.example.json` file to `src/commands.json` and fill out commands that can be run on your server! 
    - If you have some coding knowledge, feel free to create custom functions for it as shown in `src/utils/extra/CustomCommands.ts` and mark the "function" paramater in the JSON object as `true`.
- [OPTIONAL] Add the Minecraft plugin to your Spigot/Paper Server (in theory you can use something else as long as it can listen to websockets)
#### Make sure you have a working domain capable of sending/receiving ws packets (I recommend [Cloudflare Tunnels](https://www.cloudflare.com/products/tunnel/))
## .env
| Name | Description |
| --- | --- |
| `TILTIFY_CLIENT_ID` | Generated by creating an application on your Tiltify dashboard. [Refer to this link to find out how.](https://developers.tiltify.com/docs/getting-started/create-an-application) |
| `TILTIFY_CLIENT_SECRET` | Generated by creating an application on your Tiltify dashboard. [Refer to this link to find out how.](https://developers.tiltify.com/docs/getting-started/create-an-application) |
| `TILTIFY_USER_SLUG` | The username of the Tiltify account with the campaign you want to set up alerts for. For example, [in this campaign](https://tiltify.com/@gamingforglobalchange/level-up-campaign) it's `gamingforglobalchange`. |
| `TILTIFY_CAMPAIGN_SLUG` | The part of the campaign URL that refers to the name of the campaign itself. For example, [in this campaign](https://tiltify.com/@gamingforglobalchange/level-up-campaign) it's `level-up-campaign`. |
| `PORT` | The port your webserver will run on |
## src/commands.json
| Name | Description |
| --- | --- |
| `value` | The donation amount needed to trigger this event |
| `command` | The command or function name that will be triggered when the value is donated |
| `function` | Boolean value to determine if the command is a custom function or a regular minecraft command |

## Limitations
This is a fairly basic implementation that can be further extended with a bit of effort. It can also be used for other, non-minecraft related matters, but this is fairly single focused.
## Collaborators
Special thanks to:
- [Cosmo](https://github.com/aspensykes/) as his [`tiltify-donation-bot`](https://github.com/aspensykes/tiltify-donation-bot/) aided in much of the understanding of connecting to and using the Tiltify API.
- [Flero](https://github.com/flerouwu) for suggesting the Websocket server & general architecture for the project when regular RCON failed me due to limits of the protocol
# License
MIT

